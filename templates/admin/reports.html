{% extends "admin/frame.html" %}{% block admin %}
<h2>Reports</h2>
<form method="get" class="grid cols-4 card">
  <input class="input" name="q" value="{{ q or '' }}" placeholder="Search subject…">
  <select class="input" name="status"><option value="">Any status</option>{% for s in statuses %}<option {% if s==status %}selected{% endif %}>{{ s }}</option>{% endfor %}</select>
  <select class="input" name="category"><option value="">Any category</option>{% for c in categories %}<option {% if c==category %}selected{% endif %}>{{ c }}</option>{% endfor %}</select>
  <input class="input" name="company_code" value="{{ company_code or '' }}" placeholder="Company code">
  <div style="grid-column:1/-1"><button class="btn">Filter</button></div>
</form>
<div class="card" style="margin-top:12px">
  <table class="table">
    <tr><th>ID</th><th>Subject</th><th>Company</th><th>Category</th><th>Status</th><th>Created</th><th></th></tr>
    {% for r in rows %}
    <tr>
      <td>{{ r.id }}</td><td>{{ r.subject }}</td><td>{{ r.company_code }}</td><td>{{ r.category }}</td><td>{{ r.status }}</td><td>{{ r.created_at[:16] }}</td>
      <td><a class="btn" href="{{ url_for('admin_report_detail', rid=r.id) }}">Open</a></td>
    </tr>{% endfor %}
  </table>
</div>
{% endblock %}
